# vkonline
[![CodeQL](https://github.com/kiber-io/vkonline/actions/workflows/codeql-analysis.yml/badge.svg)](https://github.com/kiber-io/vkonline/actions/workflows/codeql-analysis.yml)

Вечный онлайн для ВКонтакте, написанный на языке Python

### Что это такое?
Скрипт вечного онлайна для известной социальной сети ВКонтакте (https://vk.com).
Маскируется под официальное приложение VK Messenger под Windows 10.

### Как это работает?
Скрипт повторяет запросы авторизации и вызова метода `account.setOnline` в соответствии с тем, как это делает официальное приложение VK Messenger.
Запросы отсылаются каждые 3.5 минуты + рандомное количество секунд от 0 до 60. Рандомный рассчёт времени нужен во избежание распознавания сервером ВКонтакте автоматических запросов.

### Требования и зависимости
- Python >= 3.5
    - certifi (тестировалось на версии 2020.12.5)
    - chardet (тестировалось на версии 4.0.0)
    - colorama (тестировалось на версии 0.4.4)
    - idna (тестировалось на версии 2.10)
    - requests (тестировалось на версии 2.25.1)
    - urllib3 (тестировалось на версии 1.26.5)

### Особенности
- Кросс-платформенность (Windows, Linux, macOS, Android)
- Авторизация по логину и паролю
- Авторизация по токену
- Безопасность
    - Авторизация по логину и паролю: скрипт запрашивает токен с параметром scope=offline, что позволяет получить токен практически без прав. Всё, на что способен полученный токен - получать общую информацию о странице (например, имя и фамилия). Доступа к сообщениям (чтение, отправка) и пр. личным данным НЕТ.
    - Авторизация по токену: вся ответственность возлагается на вас. "Отнять" права у ранее полученного токена нельзя. Если вы будете использовать токен с критичными правами доступа (например, messages), то я не несу ответственности за дальнейшие последствия. Сам скрипт никуда не сливает и не сохраняет токен, однако во время работы токен хранится в памяти процесса, а также может быть виден в сетевых запросах (скрипт работает через HTTPS).
- Поддержка двухфакторной авторизации (СМС, звонок, код из приложения для генерации кодов)
- Поддержка капчи (только в ручном режиме, т.е. скрипт выдаст вам ссылку на капчу, которую нужно будет вручную открыть, а также запросит код, который нужно будет ввести с этой самой капчи)
- Лёгкий перевод на любой язык (файл `languages.json` и переменная `LANGUAGE` в заголовке файла `vkonline.py`)

### Установка
1. Склонируйте репозиторий
```
git clone --recurse-submodules https://github.com/kiber-io/vkonline
cd vkonline
```
2. Рекомендуется производить все дальнейшие действия в виртуальном окружении Python.

    - Windows-style  
    ```
    python -m pip venv env
    etc\Scripts\activate.bat
    ```  
    - Unix-style  
    ```
    python3 -m pip venv env
    source env/bin/activate
    ```  
3. Установите зависимости
    - Windows-style  
    ```
    python -m pip install -r requirements.txt
    ```
    - Unix-style  
    ```
    python3 -m pip install -r requirements.txt
    ```
### Запуск
1. Самая сложная часть мануала.
    - Windows-style  
    ```
    python vkonline.py
    ```
    - Unix-style  
    ```
    python3 vkonline.py
    ```
